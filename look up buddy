local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera
local RunService = game:GetService("RunService")

-- Create the ScreenGui and Toggle Button
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = LocalPlayer.PlayerGui

-- Function to create the Toggle Button
local function createToggleButton()
    -- Creating the Toggle Button UI
    local toggleButton = Instance.new("TextButton")
    toggleButton.Size = UDim2.new(0, 100, 0, 40)  -- Button size
    toggleButton.Position = UDim2.new(0, 20, 0, 20)  -- Top-left corner (mobile)
    toggleButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)  -- Black background
    toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)  -- White text
    toggleButton.Text = "AntiLock Off"
    toggleButton.Parent = screenGui

    -- Toggle the AntiLock state
    toggleButton.MouseButton1Click:Connect(function()
        isAntiLockEnabled = not isAntiLockEnabled
        if isAntiLockEnabled then
            toggleButton.Text = "AntiLock On"
        else
            toggleButton.Text = "AntiLock Off"
        end
    end)

    return toggleButton
end

-- Initialize the button
local toggleButton = createToggleButton()

local isAntiLockEnabled = false

-- Function to handle camera manipulation when AntiLock is on
local function manipulateCamera()
    if isAntiLockEnabled then
        -- Only affect the LocalPlayer's camera
        if Camera and Camera.CFrame then
            -- Make the camera look at the sky (adjust the CFrame to look upwards)
            Camera.CFrame = CFrame.new(Camera.CFrame.Position, Camera.CFrame.Position + Vector3.new(0, 10000, 0))
        end
    end
end

-- Run the manipulation every frame
RunService.RenderStepped:Connect(function()
    manipulateCamera()
end)

-- Ensure toggle button remains when respawning
LocalPlayer.CharacterAdded:Connect(function()
    -- Remove the old button, and recreate the new one
    if screenGui:FindFirstChild("AntiLockButton") then
        screenGui:FindFirstChild("AntiLockButton"):Destroy()
    end
    toggleButton = createToggleButton()  -- Recreate toggle button after respawn
    toggleButton.Name = "AntiLockButton"  -- Set the button name for easy access
end)
